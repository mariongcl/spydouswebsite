document.addEventListener('DOMContentLoaded', () => {

    var map = L.map('map').setView([46.668721, -1.426726], 10);
    
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    

    // Coordonnées déjà au format [lat, lon]
    const coordsGeoJSON = [
        [46.677468227805804, -1.4059526037490002],
        [46.67755686786188, -1.4060702728539383],
        [46.67764048136422, -1.406200312891059],
        [46.67770051716094, -1.406291991210466],
        [46.6777565951526, -1.4063914982964434],
        [46.67780784477134, -1.406501446816975],
        [46.677832338782636, -1.4065580692378745],
        [46.677859659814345, -1.406618812063897],
        [46.67787955485876, -1.406666638162207],
        [46.67788297833049, -1.4066741880421691],
        [46.677888012030635, -1.4066807320948875],
        [46.67789293071466, -1.406687611422937],
        [46.67789968965986, -1.4066904674370662],
        [46.67790452431248, -1.4066927167891823],
        [46.67790935896511, -1.4066922839336478],
        [46.67791361853682, -1.4066916834398224],
        [46.677918108140545, -1.4066897418397275],
        [46.678604560692776, -1.4061971771752724],
        [46.67757244796175, -1.4027611273626803],
        [46.677360013373914, -1.4026108959189685],
        [46.677207712253534, -1.4025957054487037],
        [46.67708379252841, -1.4026876539411148],
        [46.676978182038766, -1.4028030987842612],
        [46.676854744390994, -1.4028949444800105],
        [46.67619137739328, -1.403526553135066],
        [46.67601183647281, -1.4038344060510042],
        [46.67598276871925, -1.404022576154773],
        [46.67605737824047, -1.404628417510935],
        [46.67613465227933, -1.40492745459116],
        [46.676140571686744, -1.4049425524492278],
        [46.676169055163626, -1.404924402051023],
        [46.676218119357685, -1.4048997775443581],
        [46.676237853428205, -1.4048937467381108],
        [46.67628249300563, -1.4048937467381108],
        [46.67633772496342, -1.4049202121955773],
        [46.67638293075791, -1.4049706277165228],
        [46.67641641032972, -1.4050389773598795],
        [46.676429650841925, -1.4051062437179667],
        [46.67651108770477, -1.4051696412827823],
        [46.67664469816896, -1.4052453713927946],
        [46.67677385463722, -1.405325428936493],
        [46.67687925796278, -1.40540115904642],
        [46.67695793918497, -1.4054574156986632],
        [46.677052950318625, -1.405533145808704],
        [46.67719249788357, -1.4056543144117484],
        [46.677326106662946, -1.4057841374576299],
        [46.67739939154055, -1.405868998582548],
        [46.67746854636914, -1.405951168900657]
    ];

    // Utiliser directement les coordonnées telles quelles dans Leaflet
    var polygon = L.polygon(coordsGeoJSON, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.5
    }).addTo(map);
    


    polygon.bindPopup("Campus IUT <br>La Roche-sur-Yon");

    // Zoom automatique sur le polygone
    map.fitBounds(polygon.getBounds());

    var iconRT = L.icon({
        iconUrl: 'logo_rt2.png',
        iconSize:     [50, 18],       // 7 % de 720x259
        iconAnchor:   [25, 18],       // centre bas de l’image
        popupAnchor:  [0, -18]        // au-dessus de l’icône
    });
    
    
    
    var customMarker = L.marker([46.676562, -1.404187], {icon: iconRT}).addTo(map);
    
    customMarker.bindPopup("<b>RT!</b><br>bâtiment").openPopup();
    

});
